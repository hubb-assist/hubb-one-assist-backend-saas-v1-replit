Perfeito! Abaixo estÃ¡ o prompt completo para o Replit AI implementar corretamente o mÃ³dulo de login/autenticaÃ§Ã£o com JWT, seguindo os padrÃµes do HUBB Assist:

ğŸ’¬ Prompt para o Replit AI â€” Implementar Login com JWT (FastAPI)
OlÃ¡ Replit! Vamos agora implementar a funcionalidade de login no projeto HUBB ONE Assist.

â—ANTES DE COMEÃ‡AR:
Leia o arquivo rules.md. NÃ£o tome decisÃµes fora do escopo. Siga todas as regras definidas.

ğŸ“¦ Tarefa: Implementar sistema de autenticaÃ§Ã£o (login)
ğŸ“Œ Objetivo
Criar endpoint de login que:

Receba email e senha em POST /auth/login

Verifique as credenciais usando bcrypt

Emita um access_token e um refresh_token como cookies HttpOnly

O usuÃ¡rio deve ser buscado na tabela users

ğŸ” Tokens JWT
Use biblioteca python-jose para gerar os tokens

Os tokens devem conter:

user_id

email

role

Tokens devem ser assinados com uma chave secreta (JWT_SECRET)

Tokens devem ser retornados como cookies seguros (HttpOnly, Secure, SameSite=Lax)

ğŸ”„ Refresh de Token
Criar rota POST /auth/refresh-token que:

Leia o refresh_token via cookie

Gere um novo access_token

ğŸšª Logout
Criar rota POST /auth/logout que:

Apague os cookies (access_token, refresh_token)

ğŸ”’ ProteÃ§Ã£o de Rotas
Criar utilitÃ¡rio get_current_user() usando Depends

Criar get_current_super_admin() para proteger rotas administrativas

Proteger rotas como /users/, /plans/ para somente usuÃ¡rios autenticados

ğŸ§¾ Estrutura esperada:
Rota	MÃ©todo	AÃ§Ã£o
/auth/login	POST	Autenticar usuÃ¡rio e emitir tokens
/auth/refresh-token	POST	Gerar novo access_token
/auth/logout	POST	Encerrar sessÃ£o

ğŸ“ Arquivos esperados:
pgsql
Copiar
Editar
app/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ routes_auth.py
â”œâ”€â”€ services/
â”‚   â””â”€â”€ auth_service.py
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ jwt_handler.py
â”‚   â””â”€â”€ security.py
â”œâ”€â”€ schemas/
â”‚   â””â”€â”€ auth.py
âœ… Regras obrigatÃ³rias:
Usar bcrypt para verificar senha

Tokens via cookies (nÃ£o em headers)

Nada de Flask, nem simplificaÃ§Ãµes

Nome das rotas e variÃ¡veis sempre em inglÃªs

Toda resposta deve estar em portuguÃªs, como:

json
Copiar
Editar
{
  "mensagem": "Login realizado com sucesso."
}
ğŸ“ ApÃ³s finalizar:
Atualize o arquivo TAREFAS.md com:

pgsql
Copiar
Editar
âœ… TAREFA BACKEND - Login com JWT implementado com sucesso, incluindo autenticaÃ§Ã£o, refresh, logout e 